
package com.sun.corba.se.spi.monitoring;

import java.util.*;


public class StatisticMonitoredAttribute extends MonitoredAttributeBase {


    private StatisticsAccumulator statisticsAccumulator;

    private Object  mutex;


  public  StatisticMonitoredAttribute(String name, String desc,
        StatisticsAccumulator s, Object mutex)
    {
        super( name );
        MonitoredAttributeInfoFactory f =
            MonitoringFactories.getMonitoredAttributeInfoFactory();
        MonitoredAttributeInfo maInfo = f.createMonitoredAttributeInfo(
                desc, String.class, false, true );

        this.setMonitoredAttributeInfo( maInfo );
        this.statisticsAccumulator = s;
        this.mutex = mutex;
    } public Object getValue( ) {
        synchronized( mutex ) {
            return statisticsAccumulator.getValue( );
        }
    }


    public void clearState( ) {
        synchronized( mutex ) {
            statisticsAccumulator.clearState( );
        }
    }


    public StatisticsAccumulator getStatisticsAccumulator( ) {
        return statisticsAccumulator;
    }
}